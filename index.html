<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TonConnect Test</title>
  <!-- Telegram WebApp API -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <!-- TON Connect UI SDK -->
  <script src="https://unpkg.com/@tonconnect/ui"></script>
</head>
<body style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background:#111;color:#fff;gap:20px;">

  <h2>ðŸš€ Teste TonConnect</h2>
  
  <button id="connectTon" style="padding:12px 20px;border:none;border-radius:10px;background:#0098EA;color:white;font-size:16px;cursor:pointer;">
    Conectar TON Wallet
  </button>

  <div id="walletAddress"></div>

  <script>
    // Telegram WebApp API
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    // TonConnect UI
    const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
      manifestUrl: "https://crafgoldnft.github.io/BotTelegran/tonconnect-manifest.json"
    });

    const btn = document.getElementById("connectTon");
    const walletDiv = document.getElementById("walletAddress");

    btn.addEventListener("click", async () => {
      try {
        const wallet = await tonConnectUI.connectWallet();
        walletDiv.innerText = "Wallet conectada: " + wallet.account.address;

        // opcional: envia para o bot Python dh
        tg.sendData(JSON.stringify({ wallet: wallet.account.address }));
      } catch (e) {
        console.error("Erro:", e);
      }
    });
  </script> 
</body>
</html>
